{"version":3,"file":"acyclic.js","sources":["../../../../node_modules/dagre/lib/acyclic.js"],"sourcesContent":["\"use strict\";\n\nvar _ = require(\"./lodash\");\nvar greedyFAS = require(\"./greedy-fas\");\n\nmodule.exports = {\n  run: run,\n  undo: undo\n};\n\nfunction run(g) {\n  var fas = (g.graph().acyclicer === \"greedy\"\n    ? greedyFAS(g, weightFn(g))\n    : dfsFAS(g));\n  _.forEach(fas, function(e) {\n    var label = g.edge(e);\n    g.removeEdge(e);\n    label.forwardName = e.name;\n    label.reversed = true;\n    g.setEdge(e.w, e.v, label, _.uniqueId(\"rev\"));\n  });\n\n  function weightFn(g) {\n    return function(e) {\n      return g.edge(e).weight;\n    };\n  }\n}\n\nfunction dfsFAS(g) {\n  var fas = [];\n  var stack = {};\n  var visited = {};\n\n  function dfs(v) {\n    if (_.has(visited, v)) {\n      return;\n    }\n    visited[v] = true;\n    stack[v] = true;\n    _.forEach(g.outEdges(v), function(e) {\n      if (_.has(stack, e.w)) {\n        fas.push(e);\n      } else {\n        dfs(e.w);\n      }\n    });\n    delete stack[v];\n  }\n\n  _.forEach(g.nodes(), dfs);\n  return fas;\n}\n\nfunction undo(g) {\n  _.forEach(g.edges(), function(e) {\n    var label = g.edge(e);\n    if (label.reversed) {\n      g.removeEdge(e);\n\n      var forwardName = label.forwardName;\n      delete label.reversed;\n      delete label.forwardName;\n      g.setEdge(e.w, e.v, label, forwardName);\n    }\n  });\n}\n"],"names":["require$$0","require$$1"],"mappings":";;;;;;;;;;CAEA,IAAI,CAAC,GAAGA,aAAA,EAAmB;CAC3B,IAAI,SAAS,GAAGC,gBAAA,EAAuB;;AAEvC,CAAA,OAAc,GAAG;GACf,GAAG,EAAE,GAAG;AACV,GAAE,IAAI,EAAE;EACP;;CAED,SAAS,GAAG,CAAC,CAAC,EAAE;GACd,IAAI,GAAG,IAAI,CAAC,CAAC,KAAK,EAAE,CAAC,SAAS,KAAK;AACrC,OAAM,SAAS,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,CAAC;AAC9B,OAAM,MAAM,CAAC,CAAC,CAAC,CAAC;GACd,CAAC,CAAC,OAAO,CAAC,GAAG,EAAE,SAAS,CAAC,EAAE;KACzB,IAAI,KAAK,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;AACzB,KAAI,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;AACnB,KAAI,KAAK,CAAC,WAAW,GAAG,CAAC,CAAC,IAAI;AAC9B,KAAI,KAAK,CAAC,QAAQ,GAAG,IAAI;KACrB,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;AACjD,GAAA,CAAG,CAAC;;AAEJ,GAAE,SAAS,QAAQ,CAAC,CAAC,EAAE;KACnB,OAAO,SAAS,CAAC,EAAE;OACjB,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM;KAC7B,CAAK;AACL,GAAA;AACA,CAAA;;CAEA,SAAS,MAAM,CAAC,CAAC,EAAE;GACjB,IAAI,GAAG,GAAG,EAAE;GACZ,IAAI,KAAK,GAAG,EAAE;GACd,IAAI,OAAO,GAAG,EAAE;;AAElB,GAAE,SAAS,GAAG,CAAC,CAAC,EAAE;KACd,IAAI,CAAC,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC,CAAC,EAAE;OACrB;AACN,KAAA;AACA,KAAI,OAAO,CAAC,CAAC,CAAC,GAAG,IAAI;AACrB,KAAI,KAAK,CAAC,CAAC,CAAC,GAAG,IAAI;AACnB,KAAI,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,EAAE;OACnC,IAAI,CAAC,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE;AAC7B,SAAQ,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC;AACnB,OAAA,CAAO,MAAM;AACb,SAAQ,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAChB,OAAA;AACA,KAAA,CAAK,CAAC;AACN,KAAI,OAAO,KAAK,CAAC,CAAC,CAAC;AACnB,GAAA;;GAEE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,EAAE,EAAE,GAAG,CAAC;AAC3B,GAAE,OAAO,GAAG;AACZ,CAAA;;CAEA,SAAS,IAAI,CAAC,CAAC,EAAE;GACf,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,EAAE,EAAE,SAAS,CAAC,EAAE;KAC/B,IAAI,KAAK,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;AACzB,KAAI,IAAI,KAAK,CAAC,QAAQ,EAAE;AACxB,OAAM,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;;AAErB,OAAM,IAAI,WAAW,GAAG,KAAK,CAAC,WAAW;OACnC,OAAO,KAAK,CAAC,QAAQ;OACrB,OAAO,KAAK,CAAC,WAAW;AAC9B,OAAM,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,WAAW,CAAC;AAC7C,KAAA;AACA,GAAA,CAAG,CAAC;AACJ,CAAA;;;;;;","x_google_ignoreList":[0]}