{"version":3,"file":"priority-queue.js","sources":["../../../../../node_modules/graphlib/lib/data/priority-queue.js"],"sourcesContent":["var _ = require(\"../lodash\");\n\nmodule.exports = PriorityQueue;\n\n/**\n * A min-priority queue data structure. This algorithm is derived from Cormen,\n * et al., \"Introduction to Algorithms\". The basic idea of a min-priority\n * queue is that you can efficiently (in O(1) time) get the smallest key in\n * the queue. Adding and removing elements takes O(log n) time. A key can\n * have its priority decreased in O(log n) time.\n */\nfunction PriorityQueue() {\n  this._arr = [];\n  this._keyIndices = {};\n}\n\n/**\n * Returns the number of elements in the queue. Takes `O(1)` time.\n */\nPriorityQueue.prototype.size = function() {\n  return this._arr.length;\n};\n\n/**\n * Returns the keys that are in the queue. Takes `O(n)` time.\n */\nPriorityQueue.prototype.keys = function() {\n  return this._arr.map(function(x) { return x.key; });\n};\n\n/**\n * Returns `true` if **key** is in the queue and `false` if not.\n */\nPriorityQueue.prototype.has = function(key) {\n  return _.has(this._keyIndices, key);\n};\n\n/**\n * Returns the priority for **key**. If **key** is not present in the queue\n * then this function returns `undefined`. Takes `O(1)` time.\n *\n * @param {Object} key\n */\nPriorityQueue.prototype.priority = function(key) {\n  var index = this._keyIndices[key];\n  if (index !== undefined) {\n    return this._arr[index].priority;\n  }\n};\n\n/**\n * Returns the key for the minimum element in this queue. If the queue is\n * empty this function throws an Error. Takes `O(1)` time.\n */\nPriorityQueue.prototype.min = function() {\n  if (this.size() === 0) {\n    throw new Error(\"Queue underflow\");\n  }\n  return this._arr[0].key;\n};\n\n/**\n * Inserts a new key into the priority queue. If the key already exists in\n * the queue this function returns `false`; otherwise it will return `true`.\n * Takes `O(n)` time.\n *\n * @param {Object} key the key to add\n * @param {Number} priority the initial priority for the key\n */\nPriorityQueue.prototype.add = function(key, priority) {\n  var keyIndices = this._keyIndices;\n  key = String(key);\n  if (!_.has(keyIndices, key)) {\n    var arr = this._arr;\n    var index = arr.length;\n    keyIndices[key] = index;\n    arr.push({key: key, priority: priority});\n    this._decrease(index);\n    return true;\n  }\n  return false;\n};\n\n/**\n * Removes and returns the smallest key in the queue. Takes `O(log n)` time.\n */\nPriorityQueue.prototype.removeMin = function() {\n  this._swap(0, this._arr.length - 1);\n  var min = this._arr.pop();\n  delete this._keyIndices[min.key];\n  this._heapify(0);\n  return min.key;\n};\n\n/**\n * Decreases the priority for **key** to **priority**. If the new priority is\n * greater than the previous priority, this function will throw an Error.\n *\n * @param {Object} key the key for which to raise priority\n * @param {Number} priority the new priority for the key\n */\nPriorityQueue.prototype.decrease = function(key, priority) {\n  var index = this._keyIndices[key];\n  if (priority > this._arr[index].priority) {\n    throw new Error(\"New priority is greater than current priority. \" +\n        \"Key: \" + key + \" Old: \" + this._arr[index].priority + \" New: \" + priority);\n  }\n  this._arr[index].priority = priority;\n  this._decrease(index);\n};\n\nPriorityQueue.prototype._heapify = function(i) {\n  var arr = this._arr;\n  var l = 2 * i;\n  var r = l + 1;\n  var largest = i;\n  if (l < arr.length) {\n    largest = arr[l].priority < arr[largest].priority ? l : largest;\n    if (r < arr.length) {\n      largest = arr[r].priority < arr[largest].priority ? r : largest;\n    }\n    if (largest !== i) {\n      this._swap(i, largest);\n      this._heapify(largest);\n    }\n  }\n};\n\nPriorityQueue.prototype._decrease = function(index) {\n  var arr = this._arr;\n  var priority = arr[index].priority;\n  var parent;\n  while (index !== 0) {\n    parent = index >> 1;\n    if (arr[parent].priority < priority) {\n      break;\n    }\n    this._swap(index, parent);\n    index = parent;\n  }\n};\n\nPriorityQueue.prototype._swap = function(i, j) {\n  var arr = this._arr;\n  var keyIndices = this._keyIndices;\n  var origArrI = arr[i];\n  var origArrJ = arr[j];\n  arr[i] = origArrJ;\n  arr[j] = origArrI;\n  keyIndices[origArrJ.key] = i;\n  keyIndices[origArrI.key] = j;\n};\n"],"names":["require$$0"],"mappings":"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","x_google_ignoreList":[0]}